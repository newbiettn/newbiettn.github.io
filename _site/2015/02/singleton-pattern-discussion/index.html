<html>
  <head>
    <meta content='Singleton pattern discussion - newbiettn' property='og:title' />
    <title>Singleton pattern discussion - newbiettn</title>
    <meta charset="UTF-8" />

<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content="width=device-width" />
<meta name="generator" content="WordPress 4.5.3" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0"
	href="http://newbiettn.com/feed/" />
<link rel="pingback" href="http://newbiettn.com/xmlrpc.php" />
<link rel="shortcut icon"
	href="http://newbiettn.com/wp-content/uploads/2015/01/favicon.jpg" />
<title>newbiettn - the road goes on and on</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://newbiettn.com/xmlrpc.php" />

<!-- GOOGLE WEB FONTS -->
<link href='http://fonts.googleapis.com/css?family=Kreon'
	rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Merriweather'
	rel='stylesheet' type='text/css'>

<!-- IE Fix for HTML5 Tags -->
<!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
<link rel='stylesheet' id='foundation-css'  href='http://127.0.0.1:4000/stylesheets/foundation.css?ver=4.5.3' type='text/css' media='all' />
<link rel='stylesheet' id='aude-layout-css'  href='http://127.0.0.1:4000/stylesheets/style.css' type='text/css' media='all' />
<link rel='stylesheet' id='superfishcss-css'  href='http://127.0.0.1:4000/stylesheets/superfish.css?ver=4.5.3' type='text/css' media='all' />
<link rel='stylesheet' id='flexslider-css'  href='http://127.0.0.1:4000/stylesheets/flexslider.css?ver=4.5.3' type='text/css' media='all' />
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/jquery.js'></script>
<script type="text/javascript" async src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/modernizr.foundation.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/jquery.infinitescroll.min.js?ver=4.5.3'></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

  </head>
  <body class="home blog">
  	<div class="preloader">
    		<div class="preload-status">&nbsp;</div>
  	</div>
  	<!-- Header -->
    <header class="row site-header">
  <div class="two columns">
  </div>
  <div class="eight columns ">
    <div class="row border-top-normal">
      <a href="http://127.0.0.1:4000">
        <h1 class="logo">newbiettn</h1>
      </a>
      <p class="motto">the road goes on and on</p>
    </div>
  </div>
  <div class="two columns fixed">
    <nav class="border-top-normal">
      <ul id="themenu" class="navigation">
      
        <li>
          <a target="_top"
             class="navigation"
             href="http://127.0.0.1:4000/">
             Home
           </a>
        </li>
      
        <li>
          <a target="_top"
             class="navigation"
             href="http://127.0.0.1:4000/about">
             About
           </a>
        </li>
      
      </ul>
    </nav>
  </div>
</header>

  	<!-- End Header -->
    <!-- Main Page Content and Sidebar -->
    <div class="row">
    	<div class="two columns">
    	</div>
    	<div class="content-container eight columns">
    		<!-- Post -->
        <div class="row article-container">
    			<div class="twelve columns">
    				<div class="row border-top-normal">
    						<article>
    							<div>
    								<header class="post_title">
    									<div class="row">
    										<div class="one columns">
    											<time class="dateline" datetime="February 05, 2015">February 05, 2015</time>
    										</div>
    										<div class="eleven columns">
    											<h2><a href="#" title="Singleton pattern discussion">Singleton pattern discussion</a></h2>
    										</div>
    									</div>
    								</header>
                    <div class="row">
                      <div class="maincontent">
                        <div class="twelve columns">
                          <p>The <strong>Singleton </strong>pattern was used widely across in my projects. Back in time, I was confused when it came to an issue: if I should define <span class="lang:default decode:true  crayon-inline ">getInstance()</span>  method with supplied parameters.</p>

<p>My $0.02 is <strong>definitely not</strong>, since you intend to pass arguments to <span class="lang:default decode:true  crayon-inline ">getInstance()</span>  method, singleton is no longer itself. I think it would be much more like a factory by which you can instantiate many sorts of instances depending on passing arguments.</p>

<p>Let’s get hands dirty by making ourselves a singleton class.</p>

<pre class="lang:default decode:true">public class SingletonDemo {
	private static SingletonDemo instance = null;
	
	private SingletonDemo () {}
	
	public static synchronized SingletonDemo getInstance(){
		if (instance == null) {
			instance = new SingletonDemo();
		}
		return instance;
	}
}
</pre>

<p>Here we have a SingletonDemo class which will return a singleton by invoking the method <span class="lang:default decode:true  crayon-inline ">getInstance()</span> . The class seems to be fine, however, we can still optimize it by using <strong>Initialization-on-demand holder idiom</strong>.</p>

<pre class="lang:java decode:true">public class SingletonDemo {
	private SingletonDemo () {}
	
	private static class SingletonDemoHolder {
		private static final SingletonDemo INSTANCE = new SingletonDemo();
	}
	public static synchronized SingletonDemo getInstance(){
		return SingletonDemoHolder.INSTANCE;
	}
}
</pre>

<p>The refactored code is better in the sense that the class <span class="lang:default decode:true  crayon-inline ">SingletonDemo</span>  has no static variables and the static inner class is not loaded until the JVM executes it. It provides thread safety.</p>

<p>Now suppose the class has properties and of course we need to initialize the instance after instantiating. We have two ways to make it. We either add parameters to <span class="lang:default decode:true  crayon-inline ">getInstance()</span>  method or define a new <span class="lang:default decode:true  crayon-inline ">init()</span>  method with mandatory parameters. From my point of view, both the former and the latter have pros and cons:</p>

<ol>
  <li>
    <p>The former perhaps _destroys _the <strong>Singleton </strong>pattern in the sense that the singleton now serves like a factory by which we can instantiate many different instances by supplying different arguments.</p>
  </li>
  <li>
    <p>The latter, which exploits additional initialization method <span class="lang:default decode:true  crayon-inline ">init()</span> , preserves the <strong>Singleton </strong>pattern, however, it is not consistency since <em>developers may forget to invoke</em> <span class="lang:default decode:true  crayon-inline ">init()</span> , which results in <strong>incomplete instantiation</strong>. It’s considered as bad coding practice I think.</p>
  </li>
</ol>

<pre class="lang:java decode:true ">public class SingletonDemo {
	private SingletonDemo () {}
	
	private Foo foo;
	private Bar bar;
	
	private static class SingletonDemoHolder {
		private static final SingletonDemo INSTANCE = new SingletonDemo();
	}
	public static synchronized SingletonDemo getInstance(){
		return SingletonDemoHolder.INSTANCE;
	}
	public void init(Foo f, Bar b) {
		this.foo = f;
		this.bar = b;
	}
}</pre>

<p> </p>

                        </div>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
    			</div>
    		</div>
        <!-- End Post -->
    </div>
    <aside class="two columns fixed">
      <div class="row sidebar ">
      </div>
    </aside>
  </div>
    <!-- Footer -->
<footer class="row">
  <div class="two columns"> </div>
  <div class="eight columns border-top-normal">
      <div class="row">
        <div class="twelve columns ">
          <p class="text-center">No Rights Reserved - Information is FREE</p>
        </div>
      </div>
    </div>
    <div class="two columns"> </div>
  </footer>

<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/foundation.min.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/superfish.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/jquery.flexslider.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/source/jquery.fancybox.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/source/helpers/jquery.fancybox-media.js?ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/app.js?1423606192&#038;ver=4.5.3'></script>
<script type='text/javascript' src='http://127.0.0.1:4000/javascripts/jquery.foundation.buttons.js?ver=4.5.3'></script>
  <!-- End Footer -->

  </body>
</html>
